<ul class="dropdown-menu border-0 text-center inherit d-block w-50 m-auto">
  <!-- Row for Pie Chart and Line Chart (Responsive Layout for Mobile and Desktop) -->
  <div class="row">
    
    <!-- Pie Chart Column with Red Border -->
    <div class="col-12 col-md-6 mb-3">
      <div class="m-3 mx-md-0"> <!-- Added padding/margin for mobile (p-3, m-3) and removed for desktop (p-md-4, m-md-0) -->
        <%= pie_chart @chart_data, 
            height: "240px", 
            width: "100%", 
            colors: ["#c5a66f", "#2ea7e0"],
            title: "Your Learning Progress",
            legend: true,
            donut: true
        %>
      </div>
    </div>

    <!-- Line Chart Column with Red Border -->
    <div class="col-12 col-md-6 mb-3">
      <div class="m-3 mx-md-0"> <!-- Added padding/margin for mobile (p-3, m-3) and removed for desktop (p-md-4, m-md-0) -->
      
      <%= line_chart @line_chart_data,
      height: "250px",  
      width: "100%",
      colors: ["#c5a66f", "#2ea7e0"],  # Optional: custom colors for each line
      title: "Study Progress Over Time",
      legend: true,
      points: true
      %>
      <!-- Button Group for Weekly, Monthly, Yearly above the Line Chart -->
        <div class="btn-group w-75 m-3">
          <%= link_to 'Weekly', menus_path(period: 'weekly'), 
              class: "btn btn-sm rounded-0 #{params[:period] == 'weekly' || params[:period].nil? ? 'btn-dark' : 'btn-outline-dark'}" %>
          <%= link_to 'Monthly', menus_path(period: 'monthly'), 
              class: "btn btn-sm rounded-0 #{params[:period] == 'monthly' ? 'btn-dark' : 'btn-outline-dark'}" %>
          <%= link_to 'Yearly', menus_path(period: 'yearly'), 
              class: "btn btn-sm rounded-0 #{params[:period] == 'yearly' ? 'btn-dark rounded-0' : 'btn-outline-dark'}" %>
        </div>
      </div>
    </div>

  </div>

  <!-- "Select Parts" Link (Centered) -->
  <div class="d-flex justify-content-center">
    <li class="dropdown-item fs-5 fw-bold font-en text-center" data-bs-toggle="collapse" data-bs-target="#collapsePart" aria-expanded="false" aria-controls="collapsePart">
      Select Parts
    </li>
  </div>

  <!-- Collapse for Select Parts -->
  <div class="collapse" id="collapsePart">
    <ul class="dropdown-menu inherit d-block w-100 m-auto rounded-0">
      <li class="dropdown-item text-center">
        <%= link_to 'part', parts_path, class: 'text-decoration-none d-inline-block w-100 text-reset' %>
      </li>
    </ul>
  </div>

  <!-- Additional Collapse Sections with Centered Content -->
  <div class="d-flex justify-content-center">
    <li class="dropdown-item fs-5 fw-bold font-en text-center" data-bs-toggle="collapse" data-bs-target="#collapseVocab" aria-expanded="false" aria-controls="collapseVocab">
      Select Vocabulary
    </li>
  </div>

  <div class="collapse" id="collapseVocab">
    <ul class="dropdown-menu inherit d-block w-100 m-auto rounded-0">
      <li class="dropdown-item text-center">
        <%= link_to 'goi', gois_path, class: 'text-decoration-none d-inline-block w-100 text-reset' %>
      </li>
      <hr class="mb-1 mt-1">
      <li class="dropdown-item text-center">
        <%= link_to 'kuni', foreigns_path, class: 'text-decoration-none d-inline-block w-100 text-reset' %>
      </li>
      <hr class="mb-1 mt-1">
      <li class="dropdown-item text-center">
        <%= link_to 'Specific skill word', specified_vocabs_path, class: 'text-decoration-none d-inline-block w-100 text-reset' %>
      </li>
    </ul>
  </div>

  <div class="d-flex justify-content-center">
    <li class="dropdown-item fs-5 fw-bold font-en text-center" data-bs-toggle="collapse" data-bs-target="#collapseKanji" aria-expanded="false" aria-controls="collapseKanji">
      Select Kanji
    </li>
  </div>

  <div class="collapse" id="collapseKanji">
    <ul class="dropdown-menu inherit d-block w-100 m-auto rounded-0">
      <li class="dropdown-item text-center">
        <%= link_to 'kanji', kanjis_path, class: 'text-decoration-none d-inline-block w-100 text-reset' %>
      </li>
      <hr class="mb-1 mt-1">
      <li class="dropdown-item text-center">
        <%= link_to 'kanji_scroll', kanji_scrolls_path, class: 'text-decoration-none d-inline-block w-100 text-reset' %>
      </li>
      <hr class="mb-1 mt-1">
      <li class="dropdown-item text-center">
        <%= link_to 'kanji_unit', kanji_units_path, class: 'text-decoration-none d-inline-block w-100 text-reset' %>
      </li>
    </ul>
  </div>

  <div class="d-flex justify-content-center">
    <li class="dropdown-item fs-5 fw-bold font-en text-center" data-bs-toggle="collapse" data-bs-target="#collapseJlpt" aria-expanded="false" aria-controls="collapseJlpt">
      Jlpt
    </li>
  </div>

  <div class="collapse" id="collapseJlpt">
    <ul class="dropdown-menu inherit d-block w-100 m-auto rounded-0">
      <li class="dropdown-item text-center">
        <%= link_to 'jlpt N5', jlpts_path(jlpt: 5), class: 'text-decoration-none d-inline-block w-100 text-reset' %>
      </li>
      <hr class="mb-1 mt-1">
      <li class="dropdown-item text-center">
        <%= link_to 'jlpt N4', jlpts_path(jlpt: 4), class: 'text-decoration-none d-inline-block w-100 text-reset' %>
      </li>
      <hr class="mb-1 mt-1">
      <li class="dropdown-item text-center">
        <%= link_to 'jlpt N3', jlpts_path(jlpt: 3), class: 'text-decoration-none d-inline-block w-100 text-reset' %>
      </li>
      <hr class="mb-1 mt-1">
      <li class="dropdown-item text-center">
        <%= link_to 'jlpt N2', jlpts_path(jlpt: 2), class: 'text-decoration-none d-inline-block w-100 text-reset' %>
      </li>
      <hr class="mb-1 mt-1">
      <li class="dropdown-item text-center">
        <%= link_to 'jlpt N1', jlpts_path(jlpt: 1), class: 'text-decoration-none d-inline-block w-100 text-reset' %>
      </li>
    </ul>
  </div>

  <div class="d-flex justify-content-center">
    <li class="dropdown-item fs-5 fw-bold font-en text-center" data-bs-toggle="collapse" data-bs-target="#collapsemycard" aria-expanded="false" aria-controls="collapsemycard">
      Select MyCard Review
    </li>
  </div>

  <div class="collapse" id="collapsemycard">
    <ul class="dropdown-menu inherit d-block w-100 m-auto rounded-0">
      <li class="dropdown-item text-center">
        <%= link_to 'select', vocab_mycards_path, class: 'text-decoration-none d-inline-block w-100 text-reset' %>
      </li>
    </ul>
  </div>

  <div class="d-flex justify-content-center">
    <li class="dropdown-item fs-5 fw-bold font-en text-center" data-bs-toggle="collapse" data-bs-target="#collapsequiz" aria-expanded="false" aria-controls="collapsequiz">
      Quiz
    </li>
  </div>

  <div class="collapse" id="collapsequiz">
    <ul class="dropdown-menu inherit d-block w-100 m-auto rounded-0">
      <li class="dropdown-item text-center">
        <%= link_to 'Start Quiz', quizes_path, class: 'text-decoration-none d-inline-block w-100 text-reset'  %>
      </li>
      <% Tokutei.where(tokutei_id: nil).each do |tokutei| %>
        <hr class="mb-1 mt-1">
        <li class="dropdown-item text-center">
          <%= link_to (current_user.lang_id == 'JP' ? tokutei.title : get_content(tokutei, current_user.lang_id)), tokutei_contents_path(id: tokutei.id), class: 'text-decoration-none d-inline-block w-100 text-reset'  %>
        </li>
      <% end %>
    </ul>
  </div>

  <div class="d-flex justify-content-center">
    <li class="dropdown-item fs-5 fw-bold font-en text-center" data-bs-toggle="collapse" data-bs-target="#collapseConversation" aria-expanded="false" aria-controls="collapseConvertion">
      Conversation
    </li>
  </div>

  <div class="collapse" id="collapseConversation">
      <ul class="dropdown-menu inherit d-block w-100 m-auto rounded-0">
        <% @audio_as.each_with_index do |audio_a, index| %>
          <% if index > 0 %> <hr class="mb-1 mt-1"> <% end %>
          <li class="dropdown-item text-center">
              <%= link_to title_nation(audio_a), specified_conversations_path(id: audio_a.id), class: 'text-decoration-none d-inline-block w-100 text-reset' %>
          </li>
        <% end %>
      </ul>
  </div>
</ul>
